import{e as o,o as c,c as u,a as e,t as g,n as V,_ as $,g as I,q as B,j as h,v as b,i as A,h as k,b as M,F as x,s as C,u as z}from"./index-x7KjULFv.js";import{a as _}from"./axios-kMxbiGYq.js";o(localStorage.getItem("editValue")==="true");const N=()=>localStorage.getItem("editValue")==="true",q={class:"button-container"},E={__name:"Task",props:{title:String,description:String,id:Number,isDone:Boolean},setup(v){const a=v,s=o(!1),l=async()=>{try{s.value=!s.value,console.log(s.value),localStorage.setItem(`isDone_${a.id}`,s.value)}catch(r){console.error(r)}},p=async()=>{try{await _.delete(`https://manage-x-backend.onrender.com/api/users/tasks/delete_tasks/${a.id}/`),location.reload()}catch(r){console.error(r)}};return s.value=localStorage.getItem(`isDone_${a.id}`)==="true",(r,i)=>(c(),u("div",{class:V([{"task-card":!s.value},"mr-5",{"is-done":s.value}])},[e("h2",null,g(a.title),1),e("p",null,g(a.description),1),e("div",q,[e("button",{onClick:i[0]||(i[0]=()=>l()),class:"done"},"Done"),e("button",{onClick:i[1]||(i[1]=()=>p()),class:"delete"},"Delete")])],2))}},j={},F={class:"add-task"},L=e("svg",{class:"plus-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[e("path",{d:"M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-5v5h-2v-5h-5v-2h5v-5h2v5h5v2z"})],-1),U=[L];function G(v,a){return c(),u("div",F,U)}const H=$(j,[["render",G]]),J={key:0,class:"edit-a-task flex flex-col items-center"},K=e("h1",{class:"text-5xl font-bold"},"Add A Task",-1),O={class:"mb-4"},P=e("label",{for:"title",class:"block text-sm font-medium"},"Title (Max: 166 symbols)",-1),Q={class:"mb-4"},R=e("label",{for:"description",class:"block text-sm font-medium"},"Description",-1),W=["disabled"],X={key:1,class:"flex flex-col p-10"},Y={class:"flex justify-between items-center"},Z=e("h1",{class:"text-5xl font-bold"},"My Tasks",-1),ee={class:"flex items-center items"},oe={__name:"Tasks",setup(v){const a=o(!1);o(!1);const s=o(!0),l=o(""),p=o(""),r=localStorage.getItem("email"),i=o([]),y=o(!1),w=async()=>{try{const{data:d}=await _.post("https://manage-x-backend.onrender.com/api/users/tasks/add_tasks/",{title:l.value,description:p.value,owner:r})}catch(d){console.log(d)}finally{location.reload()}};N();const f=()=>{s.value=!s.value,a.value=!a.value},D=o([]),T=async()=>{try{const{data:d}=await _.get("https://manage-x-backend.onrender.com/api/users/tasks/get_tasks/");d.map(t=>{r===t.owner&&(i.value.push(t),D.value.push(t.id))})}catch(d){console.log(d)}},m=o(!1),S=()=>{l.value.length>166||l.value.length<1?m.value=!1:m.value=!0};return I(()=>T()),B(y,()=>f()),(d,t)=>(c(),u(x,null,[a.value?(c(),u("div",J,[K,e("form",{class:"flex flex-col items-center",onSubmit:t[3]||(t[3]=A(()=>w(),["prevent"]))},[e("div",O,[P,h(e("input",{onInput:t[0]||(t[0]=()=>S()),"onUpdate:modelValue":t[1]||(t[1]=n=>l.value=n),required:"",type:"text",id:"title",name:"title",class:"bg-transparent mt-1 p-2 w-22 border border-gray-700 rounded-md focus:outline-none focus:border-purple-500"},null,544),[[b,l.value]])]),e("div",Q,[R,h(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=n=>p.value=n),required:"",type:"text",id:"description",name:"description",class:"bg-transparent mt-1 p-2 w-22 border border-gray-700 rounded-md focus:outline-none focus:border-purple-500 h-32 text-start"},null,512),[[b,p.value]])]),e("button",{disabled:!m.value,type:"submit",class:"disabled:background-slate-500 w-121 bg-purple-500 text-white p-2 rounded-md hover:bg-purple-600 focus:outline-none focus:ring focus:border-purple-300"},"Add A Task",8,W)],32)])):k("",!0),s.value?(c(),u("div",X,[e("div",Y,[Z,M(H,{onClick:t[4]||(t[4]=()=>f())})]),e("div",ee,[(c(!0),u(x,null,C(i.value,n=>(c(),z(E,{key:n.id,id:n.id,title:n.title,description:n.description,idDone:n.isDone},null,8,["id","title","description","idDone"]))),128))])])):k("",!0)],64))}};export{oe as default};
